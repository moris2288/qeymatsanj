<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قیمت گذاری هوشمند آنلاین املاک گنبد کاووس</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @font-face {
            font-family: 'Vazir';
            src: url('https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.eot');
            src: url('https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.eot?#iefix') format('embedded-opentype'),
                 url('https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.woff') format('woff'),
                 url('https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'Nazanin';
            src: url('https://cdn.fontcdn.ir/Font/Persian/Nazanin/Nazanin.eot');
            src: url('https://cdn.fontcdn.ir/Font/Persian/Nazanin/Nazanin.eot?#iefix') format('embedded-opentype'),
                 url('https://cdn.fontcdn.ir/Font/Persian/Nazanin/Nazanin.woff') format('woff'),
                 url('https://cdn.fontcdn.ir/Font/Persian/Nazanin/Nazanin.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazir', 'Nazanin', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .form-container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #1e3c72;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 1rem;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #6c757d, #495057);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #28a745, #218838);
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn-option {
            flex: 1;
            min-width: 120px;
            padding: 10px;
            background-color: #f8f9fa;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .btn-option:hover, .btn-option.active {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            border-color: #1e3c72;
        }
        
        .result-container {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #ddd;
            display: none;
        }
        
        .result-title {
            color: #1e3c72;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3rem;
        }
        
        .result-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #28a745;
            text-align: center;
            margin: 15px 0;
        }
        
        .contact-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .contact-link {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(45deg, #25D366, #128C7E);
            color: white;
            border-radius: 5px;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .contact-link.telegram {
            background: linear-gradient(45deg, #0088cc, #00aced);
        }
        
        .contact-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        
        .disclaimer {
            margin-top: 30px;
            padding: 15px;
            background-color: #fff3cd;
            border-radius: 5px;
            color: #856404;
            border: 1px solid #ffeeba;
            font-size: 0.9rem;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            header h1 {
                font-size: 1.5rem;
            }
            
            .btn-option {
                min-width: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>قیمت گذاری هوشمند آنلاین املاک گنبد کاووس</h1>
        </header>
        
        <div class="form-container">
            <div id="step1" class="form-step">
                <div class="form-group">
                    <label>نوع ملک:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectPropertyType('apartment')">آپارتمان</button>
                        <button class="btn-option" onclick="selectPropertyType('land')">زمین</button>
                        <button class="btn-option" onclick="selectPropertyType('old')">کلنگی</button>
                    </div>
                </div>
            </div>
            
            <!-- فرم آپارتمان -->
            <div id="apartment-form" class="hidden">
                <div class="form-group">
                    <label for="apartment-area">محدوده:</label>
                    <input type="text" id="apartment-area" class="form-control" placeholder="محدوده ملک خود را وارد کنید">
                </div>
                
                <div class="form-group">
                    <label for="apartment-size">متراژ (متر مربع):</label>
                    <input type="number" id="apartment-size" class="form-control" placeholder="متراژ ملک را وارد کنید">
                </div>
                
                <div class="form-group">
                    <label>سال ساخت:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectConstructionYear('key1')">کلید اول</button>
                        <button class="btn-option" onclick="selectConstructionYear('2-5')">2-5 سال</button>
                        <button class="btn-option" onclick="selectConstructionYear('5-7')">5-7 سال</button>
                        <button class="btn-option" onclick="selectConstructionYear('7-10')">7-10 سال</button>
                        <button class="btn-option" onclick="selectConstructionYear('10-15')">10-15 سال</button>
                        <button class="btn-option" onclick="selectConstructionYear('15-20')">15-20 سال</button>
                        <button class="btn-option" onclick="selectConstructionYear('20+')">بیش از 20 سال</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>آسانسور:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'elevator', 'yes')">دارد</button>
                        <button class="btn-option" onclick="selectOption(this, 'elevator', 'no')">ندارد</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>پارکینگ:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'parking', 'yes')">دارد</button>
                        <button class="btn-option" onclick="selectOption(this, 'parking', 'no')">ندارد</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>انباری:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'storage', 'yes')">دارد</button>
                        <button class="btn-option" onclick="selectOption(this, 'storage', 'no')">ندارد</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>تعداد واحد در ساختمان:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'units', 'under4')">زیر 4 واحد</button>
                        <button class="btn-option" onclick="selectOption(this, 'units', '4-8')">4-8 واحد</button>
                        <button class="btn-option" onclick="selectOption(this, 'units', '8-12')">8-12 واحد</button>
                        <button class="btn-option" onclick="selectOption(this, 'units', '12-18')">12-18 واحد</button>
                        <button class="btn-option" onclick="selectOption(this, 'units', '18-24')">18-24 واحد</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>نوع سند:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'document', 'single')">تک برگ</button>
                        <button class="btn-option" onclick="selectOption(this, 'document', 'mother')">مادر</button>
                        <button class="btn-option" onclick="selectOption(this, 'document', 'promissory')">قولنامه‌ای</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>تعداد طبقات ساختمان:</label>
                    <input type="number" id="total-floors" class="form-control" placeholder="تعداد طبقات ساختمان">
                </div>
                
                <div class="form-group">
                    <label>طبقه ملک شما:</label>
                    <input type="number" id="apartment-floor" class="form-control" placeholder="طبقه ملک شما">
                </div>
                
                <div class="form-group">
                    <label>عرض خیابان (متر):</label>
                    <input type="number" id="street-width" class="form-control" placeholder="عرض خیابان مقابل ملک">
                </div>
                
                <div class="form-group">
                    <label>چهارراه چراغ راهنمایی در نزدیکی:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'trafficLight', 'yes')">دارد</button>
                        <button class="btn-option" onclick="selectOption(this, 'trafficLight', 'no')">ندارد</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>موقعیت ملک:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'location', 'city')">داخل شهر</button>
                        <button class="btn-option" onclick="selectOption(this, 'location', 'suburb')">حاشیه/شهرک</button>
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="calculateApartmentPrice()">محاسبه قیمت</button>
            </div>
            
            <!-- فرم زمین و کلنگی -->
            <div id="land-form" class="hidden">
                <div class="form-group">
                    <label for="land-area">محدوده:</label>
                    <input type="text" id="land-area" class="form-control" placeholder="محدوده ملک خود را وارد کنید">
                </div>
                
                <div class="form-group">
                    <label for="land-size">متراژ (متر مربع):</label>
                    <input type="number" id="land-size" class="form-control" placeholder="متراژ ملک را وارد کنید">
                </div>
                
                <div class="form-group">
                    <label>نوع سند:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'landDocument', 'single')">تک برگ</button>
                        <button class="btn-option" onclick="selectOption(this, 'landDocument', 'mother')">مادر</button>
                        <button class="btn-option" onclick="selectOption(this, 'landDocument', 'promissory')">قولنامه‌ای</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>عرض خیابان (متر):</label>
                    <input type="number" id="land-street-width" class="form-control" placeholder="عرض خیابان مقابل ملک">
                </div>
                
                <div class="form-group">
                    <label>چهارراه چراغ راهنمایی در نزدیکی:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'landTrafficLight', 'yes')">دارد</button>
                        <button class="btn-option" onclick="selectOption(this, 'landTrafficLight', 'no')">ندارد</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>موقعیت ملک:</label>
                    <div class="btn-group">
                        <button class="btn-option" onclick="selectOption(this, 'landLocation', 'city')">داخل شهر</button>
                        <button class="btn-option" onclick="selectOption(this, 'landLocation', 'suburb')">حاشیه/شهرک</button>
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="calculateLandPrice()">محاسبه قیمت</button>
            </div>
            
            <div class="disclaimer hidden" id="channel-message">
                <p>برای ادامه پرسش‌ها و دریافت محاسبه دقیق‌تر، لطفاً در کانال تلگرامی ما عضو شوید:</p>
                <a href="https://t.me/amlakkhanahmadi" target="_blank" class="btn btn-secondary">عضویت در کانال تلگرام</a>
                <button class="btn" onclick="checkSubscription()">عضو هستم</button>
            </div>
        </div>
        
        <div class="result-container" id="result-container">
            <h3 class="result-title">قیمت تخمینی ملک شما</h3>
            <div id="price-per-meter" class="result-value"></div>
            <div id="total-price" class="result-value"></div>
            
            <div class="disclaimer">
                <p>احتمال خطا در محاسبات وجود دارد. اگر تخمین دقیق برای ارزش ملک می‌خواهید، مشخصات ملکتان را از طریق یکی از روش‌های زیر ارسال فرمایید:</p>
                <div class="contact-links">
                    <a href="https://t.me/morteza_khanahmadi" target="_blank" class="contact-link telegram">
                        <i class="fab fa-telegram"></i> تلگرام
                    </a>
                    <a href="https://wa.me/989116691558" target="_blank" class="contact-link">
                        <i class="fab fa-whatsapp"></i> واتس‌اپ
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // متغیرهای全局 برای ذخیره انتخاب‌های کاربر
        let propertyType = '';
        let constructionYear = '';
        let hasElevator = '';
        let hasParking = '';
        let hasStorage = '';
        let unitsCount = '';
        let documentType = '';
        let hasTrafficLight = '';
        let locationType = '';
        
        // متغیرهای مخصوص زمین/کلنگی
        let landDocumentType = '';
        let landHasTrafficLight = '';
        let landLocationType = '';
        
        // انتخاب نوع ملک
        function selectPropertyType(type) {
            propertyType = type;
            document.querySelectorAll('#step1 .btn-option').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (type === 'apartment') {
                document.getElementById('apartment-form').classList.remove('hidden');
                document.getElementById('land-form').classList.add('hidden');
            } else {
                document.getElementById('apartment-form').classList.add('hidden');
                document.getElementById('land-form').classList.remove('hidden');
            }
            
            document.getElementById('channel-message').classList.remove('hidden');
        }
        
        // انتخاب سال ساخت (آپارتمان)
        function selectConstructionYear(year) {
            constructionYear = year;
            document.querySelectorAll('#apartment-form .btn-group:nth-of-type(3) .btn-option').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }
        
        // تابع عمومی برای انتخاب گزینه‌ها
        function selectOption(element, type, value) {
            // حذف active از همه دکمه‌های همگروه
            const group = element.parentElement;
            group.querySelectorAll('.btn-option').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // اضافه کردن active به دکمه انتخاب شده
            element.classList.add('active');
            
            // ذخیره مقدار انتخاب شده
            switch(type) {
                case 'elevator': hasElevator = value; break;
                case 'parking': hasParking = value; break;
                case 'storage': hasStorage = value; break;
                case 'units': unitsCount = value; break;
                case 'document': documentType = value; break;
                case 'trafficLight': hasTrafficLight = value; break;
                case 'location': locationType = value; break;
                case 'landDocument': landDocumentType = value; break;
                case 'landTrafficLight': landHasTrafficLight = value; break;
                case 'landLocation': landLocationType = value; break;
            }
        }
        
        // بررسی عضویت کاربر در کانال
        function checkSubscription() {
            const userConfirmed = confirm("آیا در کانال تلگرام ما عضو هستید؟");
            
            if (userConfirmed) {
                document.getElementById('channel-message').classList.add('hidden');
                alert("با تشکر! حالا می‌توانید از تمامی امکانات استفاده کنید.");
            } else {
                alert("لطفاً ابتدا در کانال تلگرام عضو شوید");
                window.open('https://t.me/amlakkhanahmadi', '_blank');
            }
        }
        
        // محاسبه قیمت آپارتمان
        function calculateApartmentPrice() {
            const area = document.getElementById('apartment-area').value;
            const size = parseFloat(document.getElementById('apartment-size').value);
            const totalFloors = parseInt(document.getElementById('total-floors').value) || 1;
            const floor = parseInt(document.getElementById('apartment-floor').value) || 1;
            const streetWidth = parseInt(document.getElementById('street-width').value) || 0;
            
            if (!area || !size) {
                alert("لطفاً محدوده و متراژ ملک را وارد کنید");
                return;
            }
            
            if (!constructionYear || !hasElevator || !hasParking || !hasStorage || 
                !unitsCount || !documentType || !hasTrafficLight || !locationType) {
                alert("لطفاً تمامی گزینه‌ها را انتخاب کنید");
                return;
            }
            
            // قیمت پایه
            let basePrice = 36000000; // متری 36 میلیون تومان
            
            // محاسبه ارزش بر اساس محدوده
            const premiumAreas = ['طالقانی شرقی', 'طالقانی غربی', 'بر سرابی', '17 شهریور شرقی', 'هفده شهریور شرقی'];
            const isPremiumArea = premiumAreas.some(premiumArea => area.includes(premiumArea));
            const isSuburb = area.includes('شهرک') || area.includes('کوی') || area.includes('حاشیه');
            
            if (isPremiumArea) {
                basePrice *= 1.5; // 50% افزایش
            } else if (isSuburb) {
                basePrice *= 0.85; // 15% کاهش
            }
            
            // محاسبه ارزش بر اساس سال ساخت
            switch(constructionYear) {
                case 'key1': break; // بدون تغییر
                case '2-5': basePrice *= 0.93; break; // 7% کاهش
                case '5-7': basePrice *= 0.88; break; // 12% کاهش
                case '7-10': basePrice *= 0.84; break; // 16% کاهش
                case '10-15': basePrice *= 0.80; break; // 20% کاهش
                case '15-20': basePrice *= 0.78; break; // 22% کاهش
                case '20+': basePrice *= 0.75; break; // 25% کاهش
            }
            
            // محاسبه ارزش بر اساس امکانات
            if (hasElevator === 'no') basePrice *= 0.90; // 10% کاهش
            if (hasParking === 'no') basePrice *= 0.95; // 5% کاهش
            if (hasStorage === 'no') basePrice *= 0.98; // 2% کاهش
            
            // محاسبه ارزش بر اساس تعداد واحد
            switch(unitsCount) {
                case 'under4': case '4-8': break; // بدون تغییر
                case '8-12': basePrice *= 0.92; break; // 8% کاهش
                case '12-18': basePrice *= 0.90; break; // 10% کاهش
                case '18-24': basePrice *= 0.85; break; // 15% کاهش
            }
            
            // محاسبه ارزش بر اساس نوع سند
            switch(documentType) {
                case 'single': break; // بدون تغییر
                case 'mother': basePrice *= 0.90; break; // 10% کاهش
                case 'promissory': basePrice *= 0.80; break; // 20% کاهش
            }
            
            // محاسبه ارزش بر اساس طبقه
            if (floor === 1 || floor === totalFloors) {
                basePrice *= 0.95; // 5% کاهش برای طبقه اول یا آخر
            }
            
            // محاسبه ارزش بر اساس عرض خیابان
            if (streetWidth > 0) {
                if (streetWidth < 10) {
                    basePrice *= 0.92; // 8% کاهش
                } else if (streetWidth < 20) {
                    basePrice *= 0.98; // 2% کاهش
                }
            }
            
            // محاسبه ارزش بر اساس چراغ قرمز
            if (hasTrafficLight === 'yes') {
                basePrice *= 1.08; // 8% افزایش
            }
            
            // محاسبه ارزش بر اساس موقعیت
            if (locationType === 'suburb') {
                basePrice *= 0.85; // 15% کاهش
            }
            
            // نمایش نتیجه
            showResult(basePrice, size);
        }
        
        // محاسبه قیمت زمین/کلنگی
        function calculateLandPrice() {
            const area = document.getElementById('land-area').value;
            const size = parseFloat(document.getElementById('land-size').value);
            const streetWidth = parseInt(document.getElementById('land-street-width').value) || 0;
            
            if (!area || !size) {
                alert("لطفاً محدوده و متراژ ملک را وارد کنید");
                return;
            }
            
            if (!landDocumentType || !landHasTrafficLight || !landLocationType) {
                alert("لطفاً تمامی گزینه‌ها را انتخاب کنید");
                return;
            }
            
            // قیمت پایه
            let basePrice = 25000000; // متری 25 میلیون تومان
            
            // محاسبه ارزش بر اساس محدوده
            const premiumAreas = ['طالقانی شرقی', 'طالقانی غربی', 'بر سرابی', '17 شهریور شرقی', 'هفده شهریور شرقی'];
            const isPremiumArea = premiumAreas.some(premiumArea => area.includes(premiumArea));
            const isSuburb = area.includes('شهرک') || area.includes('کوی') || area.includes('حاشیه');
            
            if (isPremiumArea) {
                basePrice *= 1.5; // 50% افزایش
            } else if (isSuburb) {
                basePrice *= 0.85; // 15% کاهش
            }
            
            // محاسبه ارزش بر اساس نوع سند
            switch(landDocumentType) {
                case 'single': break; // بدون تغییر
                case 'mother': basePrice *= 0.90; break; // 10% کاهش
                case 'promissory': basePrice *= 0.80; break; // 20% کاهش
            }
            
            // محاسبه ارزش بر اساس عرض خیابان
            if (streetWidth > 0) {
                if (streetWidth < 10) {
                    basePrice *= 0.92; // 8% کاهش
                } else if (streetWidth < 20) {
                    basePrice *= 0.98; // 2% کاهش
                }
            }
            
            // محاسبه ارزش بر اساس چراغ قرمز
            if (landHasTrafficLight === 'yes') {
                basePrice *= 1.08; // 8% افزایش
            }
            
            // محاسبه ارزش بر اساس موقعیت
            if (landLocationType === 'suburb') {
                basePrice *= 0.85; // 15% کاهش
            }
            
            // نمایش نتیجه
            showResult(basePrice, size);
        }
        
        // نمایش نتیجه
        function showResult(pricePerMeter, size) {
            const totalPrice = pricePerMeter * size;
            
            document.getElementById('price-per-meter').innerHTML = `
                قیمت هر متر: ${Math.round(pricePerMeter).toLocaleString()} تومان
            `;
            
            document.getElementById('total-price').innerHTML = `
                قیمت کل: ${Math.round(totalPrice).toLocaleString()} تومان
            `;
            
            document.getElementById('result-container').style.display = 'block';
            window.scrollTo({
                top: document.getElementById('result-container').offsetTop,
                behavior: 'smooth'
            });
        }
    </script>
</body>
</html>